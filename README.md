# Cannonball LL Build Manual
![[Cannonballll.jpg]]
[English(GitHub)](https://github.com/Taro-Hayashi/Cannonball-LL/blob/main/README.md)
## 1 組み立てる前に
### 1.1 内容品
![[img/IMG_0794.jpg]]![[img/IMG_0812.jpg]]

|     | 部品名          | 個数  | 詳細            |
| --- | ------------ | --- | ------------- |
| 1   | PCB          | 1   |               |
| 2   | ランナーI        | 1   |               |
| 3   | ランナーII       | 1   |               |
| 4   | トップカバー       | 1   |               |
| 5   | ノブカバー        | 1   |               |
| 6   | ネジ（短）        | 2   | M2 6mm        |
| 7   | ネジ（長）        | 4   | M2 10mm       |
| 8   | ナット          | 4   | M2            |
| 9   | インサートナット     | 2   | M2 5mm or 6mm |
| 10  | ダイオード        | 24  | 1N4148        |
| 11  | コンデンサー       | 2   | 0.1uF         |
| 12  | シフトレジスター     | 2   | 74HC595       |
| 13  | 背面ボタン        | 3   | 3x6x4.3       |
| 14  | 側面ボタン        | 4   | 3x6x5         |
| 15  | スライドスイッチ     | 1   | SK12F14       |
| 16  | マウスボタン       | 2   | YD-003        |
| 17  | レバーボタン       | 2   | THMU27        |
| 18  | ロータリーエンコーダー  | 1   | RKJXT1F42001  |
| 19  | ゴム足          | 5   |               |
| 20  | ピンヘッダー       | 1   | 40ピン          |
| 21  | ピンソケット       | 2   | 14ピン          |
| 22  | MXソケット       | 10  | CPG151101S11  |
| 23  | 1Uホイールエンコーダー | 2   | THQWGD001C    |
| 24  | マイコンボード      | 1   | RP2040-Zero   |

### 1.2 キット以外に必要なもの
![[img/IMG_0816.jpg]]

| 部品名                                                          | 個数  |               |
| ------------------------------------------------------------ | --- | ------------- |
| [キースイッチ](https://shop.yushakobo.jp/collections/all-switches) | 10  | Cherry MX互換   |
| [キーキャップ](https://shop.yushakobo.jp/collections/keycaps)      | 10  | キースイッチに対応したもの |
| [Type-C USBケーブル](https://shop.yushakobo.jp/products/8283)    | 1   | データ転送対応のもの    |

### 1.3 対応しているもの

ここに書かれているものはご利用にある程度前提知識を必要とします。無線化については下記ビルドガイドをご覧ください。
- [Cannonball LLの組み立て方（無線化、無線マウス化編）](https://note.com/taro_hayashi/n/n1ee5ece46387)

| 部品名                                                                 | 個数  | 備考                                                      |
| ------------------------------------------------------------------- | --- | ------------------------------------------------------- |
| [SK-6812MINI-E](https://shop.yushakobo.jp/products/sk6812mini-e-10) | 14  | 発光するようになります。                                            |
| Choc V1/V2互換のキースイッチ                                                 | 10  | 高さを抑えることができます。MX互換のキースイッチとの共存はできません。ソケット、トッププレートは使いません。 |
| 絶縁できるテープ、エポシキ接着剤等                                                   | 1   | Chocスイッチを使う場合はピンヘッダの頭を絶縁すると予期しない動作を防ぐことができます。           |


### 1.4 必要な道具
![[IMG_1469.jpg]]
はんだごて以外は100円ショップで揃います。はんだごては500円商品なので1000円程度のメーカー品を購入する方がいいと思います。温度調節機能があると部品が壊れにくいです。
リンク先は画像のおすすめ品です。Amazonアソシエイトの紹介リンクを含みます。

| 道具名                                                 |                                                                            |
| --------------------------------------------------- | -------------------------------------------------------------------------- |
| はんだごて                                               | [温度調節なし、こて台付](https://amzn.to/3FSrhSC) / [温度調節付き](https://amzn.to/3QWfftR) |
| [こて台](https://amzn.to/4lkTFx9)                      |                                                                            |
| [はんだ](https://akizukidenshi.com/catalog/g/g109530/) | 鉛入りが扱いやすいです                                                                |
| [ニッパー](https://amzn.to/42jRNMn)                     |                                                                            |
| [カッター](https://amzn.to/4ciRSV6)                     |                                                                            |
| [やすり](https://amzn.to/3E1ivBl)                      | 棒、もしくは240番程度の紙やすり                                                          |
| [ピンセット](https://amzn.to/3FTdAmw)                    |                                                                            |
| [精密ドライバー](https://amzn.to/41YOjjt)                  | 00番か0番のプラスドライバー                                                            |



### 1.5 あると便利な道具

| 道具名                               | 備考                                                                   |
| --------------------------------- | -------------------------------------------------------------------- |
| [C型のこて先](https://amzn.to/42ieAZ1) | 細かいはんだ付けに向いた先端です。お持ちのはんだごてに対応したものを購入してください。                          |
| フラックス                             | はんだ付けの難易度が著しく下がります。粘り気が強く電気を通さないので端子やスイッチに入らないように使います。可燃性。           |
| IPA                               | フラックスを拭き取るのに使います。掃除にも使えます。油分を飛ばすためスイッチ等潤滑油が使用されてるものに付かないように使います。可燃性。 |
| こて台                               | やけどや火事の危険が減ります。                                                      |
| 耐熱マット                             | 同上                                                                   |
| テスター                              | はんだ付けや部品の故障の確認ができます。                                                 |
| 小皿                                | 部品をなくしにくくなります。                                                       |
| 当て木                               | 紙やすりを使う場合に平面を出しやすくなります。                                              |
| はんだ吸い取り線                          | 失敗した際に部品を取り外しやすくなります。                                                |
| デザインナイフ                           | プリント品の細かい修正等に使えます。                                                   |
| マスキングテープ                          | パーツの固定に使います。                                                         |

## 2 組み立ての準備

### 2.1 メインボードを切り離す
カッターで切れ目を入れて曲げると綺麗に割ることができます。
![[img/IMG_0829.jpg]]
タブはニッパーで切り離し、切断面をやすりがけします。削りすぎると回路を傷つけるので元々の基板端は削らないように気をつけます。
![[img/IMG_0831.jpg]]
ここはギザギザのままでも完成形に影響がありません。
![[img/IMG_0840.jpg]]
メインボード#1、メインボード#2、スイッチプレートの3つに分割できました。
![[img/IMG_0846.jpg]]
### 2.2ランナーから部品を外す
ランナーIには部品が3つ、ランナーIIには部品が17個付いています。
![[img/IMG_0543 1.jpg]]
### 2.3 シフトレジスターとロータリーエンコーダーをケースから外す
シフトレジスターはランナーIIの部品（テコ）で裏から押します。ピンで指を刺さないよう気をつけます。
ロータリーエンコーダーは左右の爪をニッパーで切ります。
![[img/IMG_0555.jpg]]
### 2.4 テストファームウェアを書き込む
こちらのuf2ファイルをダウンロードしてください。
- [tarohayashi_cannonballll_test.uf2](https://github.com/Taro-Hayashi/Cannonball-LL/releases/latest/download/tarohayashi_cannonballll_test.uf2)

BOOTボタンを押しながらUSBケーブルでPCに接続します。
![[img/IMG_0581.jpg]]
RPI-RP2ドライブとして認識されるのでuf2ファイルをドラッグ&ドロップします。
![[img/drive.png]]
これでキーボードとして認識されるようになります。
### 2.5 インサートナットの圧入
画像のプリント品にインサートナットを圧入します。メインボード#1も使用します。
![[img/IMG_0589.jpg]]
メインボード#1を裏面に当て、インサートナットにはんだごてを押し付けます。
![[img/IMG_0598.jpg]]
メインボード#1と出来るだけ段差がないようにします。
![[img/IMG_0604.jpg]]
補強材をニッパーで切り取ります。
![[IMG_0610.jpg]]
## 3 メインボード#️1のはんだ付け
### 3.1 はんだ付けで気を付けること
表面張力でパッドの上だけに溶けたはんだが広がるのをイメージします。フラックスを塗るととても簡単になります。
![[IMG_0654.jpg]]
パッドや部品の足をよく熱して基板と部品両方に電気が通るようにします。
はんだが小さい穴（VIA）と繋がってしまわないように気をつけてください。
![[IMG_0668.jpg]]
スルーホールの部品から出る足は2mm程度になるように気をつけます。2.5mmを超えると底面の3Dプリント品と干渉することがあります。
差し込んだ後にマスキングテープで固定してはんだ付けをすると楽になります。
![[IMG_0647.jpg]]
また、3Dプリント品の融点は200度前後です。直接はんだごてが当たると溶けてしまうので気をつけます。
### 3.2 RP2040-Zeroのはんだ付け
5V, GP0の位置で裏表を確認して、RP2040-Zero付属のピンヘッダを使って位置を合わせたら手前の8箇所をはんだ付けします。部品を切ったランナーを下に敷くと安定します。
![[img/IMG_0616.jpg]]
反対側もはんだ付けしたらピンヘッダーをはずして残った5箇所をはんだ付けします。
![[img/IMG_0625.jpg]]
### 3.3（オプション）SK6812MINI-Eのはんだ付け
L1からL4に、マークと欠けている方向を合わせてはんだ付けします。
![[IMG_0634.jpg]]
発光面がこちらを向いています。
![[img/IMG_0637.jpg]]

### 3.4 ダイオードのはんだ付け
ダイオードには方向があります。マークと黒線の方向を合わせます。
![[IMG_0640.jpg]]
D1にダイオードを差し込み、裏返してはんだ付けして足をニッパーで切ります。
![[IMG_0644.jpg]]
D7まで7箇所はんだ付けします。
![[IMG_0650.jpg]]
足を一本残しておきます。
![[img/IMG_1077.jpg]]### 3.5 シフトレジスターのはんだ付け
SR1、SR2に足を折ってしまわないように差し込み、裏から全ての足が出ていることを確認したらはんだ付けします。
丸マークとパッケージの欠けの方向を合わせます。
![[IMG_0670.jpg]]

### 3.6 コンデンサーのはんだ付け
C1とC2にはんだ付けします。
104と書いてあることを確認してください。違っていた場合は梱包ミスですのでこのステップを飛ばしてください。このコンデンサーは無くても動作します。
![[IMG_0678.jpg]]
### 3.7 側面ボタンとスライドスイッチのはんだ付け
側面ボタン4つをSS1からSS4に、スライドスイッチ1つをSLに差し込んではんだ付けします。
![[IMG_0682.jpg]]
### 3.8 ジャンパーの短絡
取っておいたダイオードの足をコの字型に曲げます。
![[img/IMG_1080.jpg]]
スライドスイッチの横のJP/LPを短絡します。
![[IMG_0686.jpg]]

### 3.9 背面ボタンのはんだ付け
背面ボタンは裏側から差し込みます。![[IMG_0689.jpg]]
### 3.10  動作の確認
USBケーブルでPCに接続して側面ボタン、背面ボタンの動作を確認します。8が入力され続ける場合はスライドスイッチを切り替えてください。
![[IMG_0858.jpg]]
確認したらケーブルを外します。電源が入った状態ではんだ付けを行うと故障の原因になります。
### 3.11 ピンソケットのはんだ付け
ピンソケット、ピンヘッダーを3ピンずつ8つ切り出します。
![[IMG_0864.jpg]]
ピンソケットにピンヘッダーの短い方を差し込んで、ピンソケット側をメインボード#1に配置します。
![[IMG_0872.jpg]]
ランナーIIの部品を6つ差し込みます。入りにくい場合はピンヘッダーやピンソケットの切れ跡を削ってください。
![[IMG_0882.jpg]]
メインボード#2をピンヘッダーに合わせてかぶせます（まだはんだ付けしません）。全てのピンヘッダーを通すのが難しい時は無理をして基板を擦らないように数個ずつにします。
![[IMG_0887.jpg]]
裏返したらメインボード#1にピンソケットをはんだ付けします。
![[IMG_0904.jpg]]
はんだ付けが終わったら表に戻してメインボード#2を外します。
プリント品は外す必要はありません。
![[IMG_0909.jpg]]
メインボード#2をはんだ付けしてしまっていた場合はテコを使って外してください。ピンヘッダが曲がると接触不良の原因となるため垂直に引き抜くことを意識してください。
![[IMG_1114.jpg]]
テスターがある場合はRP2040-Zero、シフトレジスターのGPIOとピンヘッダーが導通していることを確認します。
![[test2.jpg]]
## 3.12 下半分の組み立て
ランナーIの部品を組み合わせ、ランナーIIの部品を5個置きます。中央の部品の向きに気をつけます。
![[IMG_0901.jpg]]
上からメインボード#1を置き、ランナーIの角の部品の一つにナットを取り付けます。
![[IMG_0917.jpg]]
合計9個のランナーIの部品と4つのナットを取り付けました。
![[IMG_0921.jpg]]
## 4 メインボード#2のはんだ付け

### 4.1（オプション）SK6812MINI-Eのはんだ付け
L5からL14にはんだ付けします。メインボード#2では発光面が反対側に向きます。
![[IMG_0926.jpg]]
### 4.2 ダイオードのはんだ付け
D8からD24までをはんだ付けします。D19以降は取り付ける面が違います。
![[IMG_0930.jpg]]
![[IMG_0933.jpg]]
### 4.3 MXソケットのはんだ付け
S1からS10まではんだ付けします。ソケットには必要なはんだの量が多めです。
![[IMG_0946.jpg]]
### 4.4  レバーボタンのはんだ付け
L1、L2に取り付けます。側面にも接点があるのではんだ付けします。
![[IMG_0954.jpg]]
### 4.5 マウスボタンのはんだ付け
M1、M2に取り付けます。クリックバーの位置をシルク印刷に合わせます。
![[IMG_0959.jpg]]
### 4.6  1Uホイールエンコーダーの組み立て
小袋の部品のうち以下のものを使用します。
![[img/IMG_0854.jpg]]

|     | 部品名        | 個数  |               |
| --- | ---------- | --- | ------------- |
| 1   | ホイール       | 2   |               |
| 2   | シャフト       | 2   |               |
| 3   | スペーサー      | 2   |               |
| 4   | ベース        | 2   |               |
| 5   | カバー        | 2   |               |
| 6   | ホイールエンコーダー | 2   | 6x6x7         |
| 7   | クリックボタン    | 2   | 11mm          |
| 8   | ネジ（小）      | 4   | M2 5mm or 6mm |
| 9   | ナット        | 4   | M2            |

E1とE2に、方向を選んでクリックボタンとホイールエンコーダーをはんだ付けします。ビルドガイドでは画像の向きにしました。
![[img/IMG_0963.jpg]]
ホイールの平らな面からシャフトを差し込みます。
![[img/IMG_0969.jpg]]
エンコーダーにホイールを取り付けます。六角形の穴と六角形の軸が合うようにします。
![[img/IMG_0973.jpg]]
スペーサーを取り付けてタクトスイッチに乗せます。
![[img/IMG_0980.jpg]]
ベースをネジとナットで取り付けます。
![[img/IMG_0983.jpg]]
カバーを取り付けます。
![[img/IMG_0987.jpg]]
### 4.7 ロータリーエンコーダーのはんだ付け
STにはんだ付けします。
![[img/IMG_0992.jpg]]
### 4.8 トップカバーの取り付け
裏面からネジ（短）で取り付けます。
![[img/IMG_0998.jpg]]
マウスボタンがクリック可能なことを確認します。
![[img/IMG_1002.jpg]]
### 4.9 ピンヘッダのはんだ付け
改めてメインボード#2の部品の向き、はんだ付けの状態を確認します。
問題がなさそうだったらメインボード#1に乗せてピンヘッダをはんだ付けします。
![[img/IMG_1019.jpg]]
隙間をできるだけ減らすようにしながら角のピンヘッダから一つずつ作業をすると綺麗に出来上がります。
### 4.10 動作確認
ロータリーエンコーダーにランナーIについていたシャフトを取り付けます。
![[img/IMG_1097.jpg]]
PCに接続して動作を確認します。キースイッチを一つ使ってソケットの動作を確認していきます。キースイッチの足が折れないように気をつけてください。
![[img/IMG_1099.jpg]]
動作を確認したらUSBケーブルを取り外します。
### 4.11 スイッチプレートを取り付ける
メインボード#2とスイッチプレートの位置を合わせてキースイッチを取り付けます。
![[img/IMG_1101.jpg]]
10個全て取り付けたらゴム足を付けます。
![[img/IMG_1032.jpg]]
キーキャップとノブカバーを取り付けたら完成です。
![[img/IMG_1104.jpg]]
ここからはPCを使った作業になります。
## 5 カスタマイズ

### 5.1 Remap対応ファームウェアに更新する
こちらのuf2ファイルをダウンロードします。
- [tarohayashi_cannonballll_default.uf2](https://github.com/Taro-Hayashi/Cannonball-LL/releases/latest/download/tarohayashi_cannonballll_default.uf2)

ホイールの間のキーを押しながらUSBケーブルでPCに接続するとRPI-RP2ドライブとして認識されます。無理だった場合は裏面の丸ボタンを押しながら接続してください。
![[img/IMG_1108.jpg]]
RPI-RP2ドライブにuf2ファイルをドラッグ&ドロップをしたらRemap対応のファームウェアへの更新が完了です。

### 5.2 Remapでキーを入れ替える
Remapに接続してカスタマイズを選びます。
- remap https://remap-keys.app/
![[img/remap_start.jpg]]
そのまま進んでCannonball LLを選びます。
![[img/remap_key.jpg]]
下のキーリストからドラッグ&ドロップして、右上の書き込みボタンを押すとキーの入れ替えができます。
![[img/remap_mod.jpg]]
キーをクリックすると修飾キーとの同時押しの設定もできます。
### 5.2 ロータリーエンコーダーの設定
回転方向をクリックすると登録するキーを切り替えることができます。
![[img/remap_encoder.jpg]]
先頭のロータリーエンコーダーの押し込みは無効になっています。
### 5.3 （オプション）LEDの調節
画像のアイコンから発光を調整できます。
![[img/remap_led.jpg]]
### 5.4 特殊なキー
Remapに標準で用意されている機能のほか、Functions タブに特殊なショートカットや設定用のキーがあります。
![[img/remap_vuk.jpg]]

| キー名         | キーコード      | 詳細                                    |
| ----------- | ---------- | ------------------------------------- |
| Cmd / Ctrl  | CMD_CTL    | Control（Windows） / Command（MacOS、iOS） |
| Undo        | UNDO       | Cmd / Ctrl + Z                        |
| Redo        | REDO       | Cmd / Ctrl + Shift + Z                |
| Copy        | COPY       | Cmd / Ctrl + C                        |
| Cut         | CUT        | Cmd / Ctrl + X                        |
| Paste       | PASTE      | Cmd / Ctrl + V                        |
| Scale Up    | SC_UP      | Cmd / Ctrl + +                        |
| Scale Down  | SC_DOWN    | Cmd / Ctrl + -                        |
| Scale Reset | SC_RESET   | Cmd / Ctrl + 0                        |
| Captcha     | CAPTCHA    | Win + Shift + 4 / Command + Shift + 4 |
| Save        | SAVE       | Cmd / Ctrl + S                        |
| Save As     | SAVEAS     | Cmd / Ctrl + Shift + S                |
| Close Tab   | CLOSETAB   | Cmd / Ctrl + W                        |
| Restore Tab | RSTRTAB    | Cmd / Ctrl + Shift + T                |
| Next App    | NEXTAPP    | Cmd / Ctrl +                          |
| Prev App    | PREVAPP    | Cmd / Ctrl +                          |
| RGB Layers  | RGB_LAYERS | LEDの色をレイヤーごとに変える機能のオン/オフ              |

## 6 その他

### 6.1 メンテナンス
ノブが緩くなったり1Uホイールエンコーダーのカバーが外れやすい場合ははんだごてで溶かすことで調節、固定することができます。
上下の締結にゆるみが出たり接触が悪くなった場合はピンヘッダとピンソケットの交換を検討してください。
### 6.2 プリント品のプリント用データ
- [Data for 3D Printing(GitHub)]()
### 6.3 ファームウェアのコード
- [keyboards/tarohayashi/cannonballll(GitHub)](https://github.com/Taro-Hayashi/qmk_firmware/tree/tarohayashi/keyboards/tarohayashi/cannonballll)
### 6.4 保守品の入手先

| 部品名          | 型番            | 入手先の例                                                                                                                    |
| ------------ | ------------- | ------------------------------------------------------------------------------------------------------------------------ |
| ネジ（短）        | M2 5~6mm      | [遊舎工房](https://shop.yushakobo.jp/products/a0800t2?variant=37665432699041)、[モノタロウ](https://www.monotaro.com/p/2902/1476/) |
| ネジ（長）        | M2 10mm       | [遊舎工房](https://shop.yushakobo.jp/products/a0800t2?variant=43940945166567)、[モノタロウ](https://www.monotaro.com/p/2902/1494)  |
| ナット          | M2            | [遊舎工房](https://shop.yushakobo.jp/products/4094)、[モノタロウ](https://www.monotaro.com/g/06150311)                             |
| インサートナット     | M2 5mm or 6mm | [モノタロウ](https://www.monotaro.com/p/4210/7484/)                                                                           |
| ダイオード        | 1N4148        | [遊舎工房](https://shop.yushakobo.jp/products/a0800di-01-100)、[秋月電子通商](https://akizukidenshi.com/catalog/g/g100941/)         |
| コンデンサー       | 0.1uF         | [秋月電子通商](https://akizukidenshi.com/catalog/g/g100090/)                                                                   |
| シフトレジスター     | 74HC595       | [秋月電子通商](https://akizukidenshi.com/catalog/g/g114053/)                                                                   |
| 背面ボタン        | 3x6x4.3       | [秋月電子通商](https://akizukidenshi.com/catalog/g/g108073/)                                                                   |
| 側面ボタン        | 3x6x5         | [秋月電子通商](https://akizukidenshi.com/catalog/g/g114890/)                                                                   |
| スライドスイッチ     | SK12F14       | [秋月電子通商](https://akizukidenshi.com/catalog/g/g115703/)（同型、要加工）                                                           |
| マウスボタン       | YD-003        | [秋月電子通商](https://akizukidenshi.com/catalog/g/g114312/)（同型、未検証）                                                           |
| レバーボタン       | TMHU27        | [秋月電子通商](https://akizukidenshi.com/catalog/g/g108071/)（同型、未検証）                                                           |
| ロータリーエンコーダー  | RKJXT1F42001  | [マルツ電子](https://www.marutsu.co.jp/pc/i/2578366/)                                                                         |
| ゴム足          |               | [遊舎工房](https://shop.yushakobo.jp/products/a0800ur-01-6)                                                                  |
| ピンヘッダー       | 40ピン          | [秋月電子通商](https://akizukidenshi.com/catalog/g/g100167/)                                                                   |
| ピンソケット       | 14ピン          | [秋月電子通商](https://akizukidenshi.com/catalog/g/g103138/)                                                                   |
| MXソケット       | CPG151101S11  | [遊舎工房](https://shop.yushakobo.jp/products/a01ps)                                                                         |
| 1Uホイールエンコーダー | THQWGD001C    | [BOOTH](https://tarohayashi.booth.pm/items/5967252)                                                                      |
| マイコンボード      | RP2040-Zero   | [スイッチサイエンス](https://www.switch-science.com/products/7886/)                                                               |

### 6.5 販売サイト
- BOOTH - [https://tarohayashi.booth.pm/items/6736492](https://tarohayashi.booth.pm/items/6736492 "商品ページを見る")
